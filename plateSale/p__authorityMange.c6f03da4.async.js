(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{LGu7:function(e,t,a){e.exports={main:"antd-pro-pages-authority-mange-index-main"}},qTtk:function(e,t,a){"use strict";a.r(t);var n=a("k1fw"),l=a("q1tI"),r=a.n(l),i=a("Hx5s"),c=(a("14J3"),a("BMrR")),o=(a("+L6B"),a("2/Rp")),u=(a("jCWc"),a("kPKH")),s=(a("5NDa"),a("5rEg")),m=(a("OaEy"),a("2fM7")),d=(a("y8nQ"),a("Vl3Y")),p=a("tJVT"),b=a("9kvl"),g=function(e){e.dispatch;var t=e.authorityList,a=e.getList,n=d["a"].useForm(),l=Object(p["a"])(n,1),i=l[0],b=m["a"].Option,g=function(){var e=i.getFieldsValue();a(e)},f=function(e){};return r.a.createElement("div",null,r.a.createElement(d["a"],{form:i,name:"horizontal_login",onFinish:g},r.a.createElement(c["a"],{gutter:20},r.a.createElement(u["a"],{span:6},r.a.createElement(d["a"].Item,{name:"name",label:"\u59d3\u540d"},r.a.createElement(s["a"],{placeholder:"\u59d3\u540d"}))),r.a.createElement(u["a"],{span:6},r.a.createElement(d["a"].Item,{name:"phoneNumber",label:"\u624b\u673a\u53f7"},r.a.createElement(s["a"],{placeholder:"\u624b\u673a\u53f7",maxLength:11}))),r.a.createElement(u["a"],{span:6},r.a.createElement(d["a"].Item,{name:"Integer role_code",label:"\u89d2\u8272"},r.a.createElement(m["a"],{placeholder:"\u5168\u90e8\u89d2\u8272",onChange:f},t.rolesList&&t.rolesList.map((function(e){return r.a.createElement(b,{key:e.code,value:e.code+","+e.type},e.message)}))))),r.a.createElement(d["a"].Item,null,r.a.createElement(o["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))))},f=Object(b["a"])((function(e){var t=e.authorityList;return{authorityList:t}}))(g),y=(a("g9YV"),a("wCAj")),E=(a("2qtc"),a("kLXV")),h=a("xvlK"),v=(a("sRBo"),a("kaz8")),L=(a("miYZ"),a("tsqr")),O=a("ETKo");function k(e){var t=e.authorityList,a=(e.dispatch,e.isVisible),i=void 0===a||a,c=e.visibleFn,o=void 0===c?null:c,u=e.type,b=e.rows,g=void 0===b?null:b,f=e.getList,y=m["a"].Option,h=d["a"].useForm(),k=Object(p["a"])(h,1),j=k[0],I=g?g.role:null,N=Object(l["useState"])(I),S=Object(p["a"])(N,2),C=S[0],x=S[1],w=Object(l["useState"])({}),z=Object(p["a"])(w,2),T=z[0],V=z[1],F=function(){j.validateFields();var e,t=T.brandid,a=void 0===t?"":t,l=T.brandname,r=void 0===l?"":l,i=j.getFieldsValue();e=null===g?Object(n["a"])({},i,{brandId:a,brandName:r}):Object(n["a"])({},i,{agentOutletsId:g.agentOutletsId,type:g.type,brandId:g.brandId,brandName:g.brandName,id:g&&g.id}),Object(O["a"])(e).then((function(e){var t=e.retCode,a=e.retMsg;"0000"==t&&(L["a"].success(a),f(),o(),j.resetFields())}))},q=function(){o(),j.resetFields(),x(null)},J=function(e,t){var a=t.key;x(a)},G=[{label:"\u4eba\u5458\u7ba1\u7406",value:"\u4eba\u5458\u7ba1\u7406"},{label:"\u7ecf\u9500\u5546\u7ba1\u7406",value:"\u7ecf\u9500\u5546\u7ba1\u7406"},{label:"\u76ee\u5f55\u7ba1\u7406",value:"\u76ee\u5f55\u7ba1\u7406"},{label:"\u8f66\u8f86\u7ba1\u7406",value:"\u8f66\u8f86\u7ba1\u7406"},{label:"\u5907\u6848\u7ba1\u7406",value:"\u5907\u6848\u7ba1\u7406"},{label:"\u6743\u9650\u7ba1\u7406",value:"\u6743\u9650\u7ba1\u7406"}],K=function(e){return"\u8d85\u7ea7\u7ba1\u7406\u5458"===e?"\u62e5\u6709\u6240\u6709\u6743\u9650":"\u54c1\u724c\u5382\u5bb6"===e?r.a.createElement(v["a"].Group,{key:"1",disabled:!0,options:G,defaultValue:["\u7ecf\u9500\u5546\u7ba1\u7406"]}):"\u54c1\u724c\u5382\u5bb6"!=e&&null!=e&&"\u8d85\u7ea7\u7ba1\u7406\u5458"!=e?r.a.createElement(v["a"].Group,{key:"2",disabled:!0,options:G,defaultValue:["\u5907\u6848\u7ba1\u7406"]}):"\u6839\u636e\u89d2\u8272\u9009\u62e9\u81ea\u52a8\u5339\u914d"},R=function(e,t){V(t)};return r.a.createElement("div",null,r.a.createElement(E["a"],{title:"add"===u?"\u65b0\u589e\u7ba1\u7406\u5458":"\u7f16\u8f91",visible:i,onOk:F,onCancel:q,getContainer:!1},r.a.createElement(d["a"],{labelCol:{span:4},form:j,initialValues:Object(n["a"])({},g,{type:g&&g.role,agentOutletsId:g&&g.brandName})},r.a.createElement(d["a"].Item,{rules:[{required:!0,message:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],label:"\u59d3\u540d",name:"name"},r.a.createElement(s["a"],{placeholder:"\u59d3\u540d"})),r.a.createElement(d["a"].Item,{rules:[{required:!0,message:"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a"}],label:"\u624b\u673a\u53f7",name:"phoneNumber"},r.a.createElement(s["a"],{placeholder:"\u624b\u673a\u53f7"})),r.a.createElement(d["a"].Item,{rules:[{required:!0,message:"\u89d2\u8272\u4e0d\u80fd\u4e3a\u7a7a"}],label:"\u89d2\u8272\u9009\u62e9",className:"mt-8",name:"type"},r.a.createElement(m["a"],{getPopupContainer:function(e){return e.parentNode},placeholder:"\u6743\u9650\u9009\u62e9",onChange:J},t.rolesList&&t.rolesList.map((function(e){return r.a.createElement(y,{key:e.message,value:e.code+","+e.type},e.message)})))),"\u54c1\u724c\u5382\u5bb6"===C&&r.a.createElement(d["a"].Item,{rules:[{required:!0,message:"\u7ecf\u9500\u5546\u4e0d\u80fd\u4e3a\u7a7a"}],label:"\u7ecf\u9500\u5546",name:"agentOutletsId"},r.a.createElement(m["a"],{getPopupContainer:function(e){return e.parentNode},placeholder:"\u7ecf\u9500\u5546",onChange:R},t.agentList&&t.agentList.map((function(e,t){return r.a.createElement(y,{brandid:e.brandId,brandname:e.brandName,key:t,value:e.agentOutletId},e.brandName)})))),r.a.createElement(d["a"].Item,{label:"\u529f\u80fd\u6743\u9650"},K(C),r.a.createElement("div",null)))))}var j=Object(b["a"])((function(e){var t=e.authorityList;return{authorityList:t}}))(k),I=a("LxC5"),N=function(e){var t=e.authorityList,a=e.dispatch,n=e.getList,i=e.tableLoading,s=(e.login,E["a"].confirm),m=[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u624b\u673a\u53f7",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"\u89d2\u8272",dataIndex:"role",key:"role",render:function(e,t){return r.a.createElement("div",null,e,"  ",t.brandName&&r.a.createElement("span",null," (",t.brandName,")")," ")}},{title:"\u529f\u80fd\u6743\u9650",dataIndex:"authority",key:"authority"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return r.a.createElement("div",null,1==e?r.a.createElement("a",{className:"font-red"},"\u5173\u95ed"):r.a.createElement("a",{className:"font-success"},"\u5f00\u542f"))}},{title:"\u505c\u7528/\u542f\u7528\u65e5\u671f",dataIndex:"updateTime",key:"updateTime"},{title:"\u64cd\u4f5c",key:"action",render:function(e){return console.log(e),e.phoneNumber===I["c"]?r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){Y("edit",e)},className:"mr-8"},"\u7f16\u8f91")):r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){Y("edit",e)},className:"mr-8"},"\u7f16\u8f91"),1==e.status?r.a.createElement("a",{onClick:function(){b(e)}},"\u542f\u7528"):r.a.createElement("a",{onClick:function(){d(e)},className:"font-red"},"\u505c\u7528"))}}],d=function(e){var t=e.id;s({title:"\u505c\u7528",content:"\u505c\u7528\u4f1a\u5bfc\u81f4\u8be5\u7ba1\u7406\u5458\u4e0d\u80fd\u5728\u767b\u5f55\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\u8fdb\u884c\u4efb\u4f55\u7ba1\u7406\u64cd\u4f5c\uff0c\u786e\u8ba4\u8981\u505c\u7528\u4e48\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a({type:"authorityList/modifyStatus",payload:{status:1,id:t}})},onCancel:function(){}})},b=function(e){var t=e.id;s({title:"\u542f\u7528",content:"\u542f\u7528\u540e\u8be5\u7ba1\u7406\u5458\u5c06\u6062\u590d\u8d26\u53f7\u89d2\u8272\u5bf9\u5e94\u7ba1\u7406\u6743\u9650\uff0c\u786e\u8ba4\u8981\u542f\u7528\u5417\uff1f",cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onOk:function(){a({type:"authorityList/modifyStatus",payload:{status:0,id:t}})},onCancel:function(){}})},g=Object(l["useState"])(t.pageSize),f=Object(p["a"])(g,2),v=f[0],L=f[1],O=Object(l["useState"])(t.current),k=Object(p["a"])(O,2),N=k[0],S=k[1],C=function(e){S(e),a({type:"authorityList/pageSizeAndCurrent",payload:{current:N,pageSize:v},onSuccess:function(){n({pageIndex:e,pageSize:v})}})},x={total:t.total,current:N,pageSize:v,onChange:C,showTotal:function(e){return"\u5171".concat(e,"\u6761")},showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:function(e,t){S(e),L(t)}},w=Object(l["useState"])(!1),z=Object(p["a"])(w,2),T=z[0],V=z[1],F=Object(l["useState"])("add"),q=Object(p["a"])(F,2),J=q[0],G=q[1],K=Object(l["useState"])(null),R=Object(p["a"])(K,2),B=R[0],M=R[1],P=function(){V(!1)},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;M(t),G(e),V(!0)};return r.a.createElement("div",{className:"mt-32"},r.a.createElement(c["a"],{justify:"end"},r.a.createElement(u["a"],null,r.a.createElement(o["a"],{onClick:function(){Y("add")},className:"btn-green",icon:r.a.createElement(h["a"],null),type:"primary"},"\u65b0\u589e"))),r.a.createElement("div",{className:"mt-16"},r.a.createElement(y["a"],{loading:i,rowKey:"id",dataSource:t.data?t.data.content:[],columns:m,pagination:x})),r.a.createElement(j,{key:B?B.id:1,type:J,isVisible:T,visibleFn:P,rows:B,getList:n}))},S=Object(b["a"])((function(e){var t=e.authorityList,a=e.loading,n=e.login;return{authorityList:t,login:n,tableLoading:a.effects["authorityList/getList"]}}))(N),C=a("LGu7"),x=a.n(C),w=function(e){var t=e.authorityList,a=e.dispatch,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=t.pageSize,r=t.current;null!=e&&(e.pageSize||(e.pageSize=l,e.pageIndex=r)),a({type:"authorityList/getList",payload:Object(n["a"])({pageSize:e?e.pageSize:l,pageIndex:e?e.current:r},e)})},o=function(){a({type:"authorityList/getRoles"})};return Object(l["useEffect"])((function(){c(),o()}),[]),r.a.createElement(i["b"],{className:x.a.main},r.a.createElement("div",null,r.a.createElement(f,{getList:c}),r.a.createElement(S,{getList:c})))};t["default"]=Object(b["a"])((function(e){var t=e.authorityList;return{authorityList:t}}))(w)}}]);