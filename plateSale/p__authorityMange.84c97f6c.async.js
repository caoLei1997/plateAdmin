(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{LGu7:function(e,t,a){e.exports={main:"antd-pro-pages-authority-mange-index-main"}},qTtk:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),l=a.n(n),r=a("Hx5s"),i=(a("14J3"),a("BMrR")),c=(a("+L6B"),a("2/Rp")),o=(a("jCWc"),a("kPKH")),u=(a("5NDa"),a("5rEg")),s=a("k1fw"),m=(a("OaEy"),a("2fM7")),d=(a("y8nQ"),a("Vl3Y")),p=a("tJVT"),b=a("9kvl"),f=function(e){e.dispatch;var t=e.authorityList,a=e.getList,n=d["a"].useForm(),r=Object(p["a"])(n,1),b=r[0],f=m["a"].Option,g=function(){var e=b.getFieldsValue();a(Object(s["a"])(Object(s["a"])({},e),{},{pageIndex:1}))};return l.a.createElement("div",null,l.a.createElement(d["a"],{form:b,name:"horizontal_login",onFinish:g},l.a.createElement(i["a"],{gutter:20},l.a.createElement(o["a"],{span:6},l.a.createElement(d["a"].Item,{name:"name",label:"\u59d3\u540d"},l.a.createElement(u["a"],{placeholder:"\u59d3\u540d"}))),l.a.createElement(o["a"],{span:6},l.a.createElement(d["a"].Item,{name:"phoneNumber",label:"\u624b\u673a\u53f7"},l.a.createElement(u["a"],{placeholder:"\u624b\u673a\u53f7",maxLength:11}))),l.a.createElement(o["a"],{span:6},l.a.createElement(d["a"].Item,{name:"type",label:"\u89d2\u8272"},l.a.createElement(m["a"],{placeholder:"\u5168\u90e8\u89d2\u8272"},t.rolesList&&t.rolesList.map((function(e){return l.a.createElement(f,{key:e.code,value:e.code+","+e.type},e.message)}))))),l.a.createElement(d["a"].Item,null,l.a.createElement(c["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))))},g=Object(b["a"])((function(e){var t=e.authorityList;return{authorityList:t}}))(f),E=(a("g9YV"),a("wCAj")),y=(a("2qtc"),a("kLXV")),h=a("xvlK"),v=(a("sRBo"),a("kaz8")),O=a("WmNS"),L=a.n(O),j=(a("miYZ"),a("tsqr")),k=a("9og8"),I=a("ETKo");function N(e){var t=e.authorityList,a=(e.dispatch,e.isVisible),r=void 0===a||a,i=e.visibleFn,c=void 0===i?null:i,o=e.type,b=e.rows,f=void 0===b?null:b,g=e.getList,E=m["a"].Option,h=d["a"].useForm(),O=Object(p["a"])(h,1),N=O[0],x=Object(n["useState"])(f?f.role:null),w=Object(p["a"])(x,2),C=w[0],S=w[1],V=Object(n["useState"])({}),T=Object(p["a"])(V,2),F=T[0],z=T[1],q=function(){var e=Object(k["a"])(L.a.mark((function e(){var t,a,n,l,r,i;return L.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.validateFields();case 2:e.sent,t=F.brandid,a=void 0===t?"":t,n=F.brandname,l=void 0===n?"":n,r=N.getFieldsValue(),console.log(f),i=null===f?Object(s["a"])(Object(s["a"])({},r),{},{brandId:a,brandName:l}):Object(s["a"])(Object(s["a"])({},r),{},{agentOutletsId:f.agentOutletsId,brandId:a||f.brandId,brandName:l||f.brandName,id:f&&f.id}),Object(I["a"])(i).then((function(e){var t=e.retCode,a=e.retMsg;"0000"==t&&(j["b"].success(a),g(),c(),N.resetFields())}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){c(),N.resetFields(),S(null)},G=function(e,t){var a=t.key;S(a)},K=[{label:"\u4eba\u5458\u7ba1\u7406",value:"\u4eba\u5458\u7ba1\u7406"},{label:"\u7ecf\u9500\u5546\u7ba1\u7406",value:"\u7ecf\u9500\u5546\u7ba1\u7406"},{label:"\u76ee\u5f55\u7ba1\u7406",value:"\u76ee\u5f55\u7ba1\u7406"},{label:"\u8f66\u8f86\u7ba1\u7406",value:"\u8f66\u8f86\u7ba1\u7406"},{label:"\u5907\u6848\u7ba1\u7406",value:"\u5907\u6848\u7ba1\u7406"},{label:"\u6743\u9650\u7ba1\u7406",value:"\u6743\u9650\u7ba1\u7406"}],R=function(e){return"\u8d85\u7ea7\u7ba1\u7406\u5458"===e?"\u62e5\u6709\u6240\u6709\u6743\u9650":"\u54c1\u724c\u5382\u5bb6"===e?l.a.createElement(v["a"].Group,{key:"1",disabled:!0,options:K,defaultValue:["\u8f66\u8f86\u7ba1\u7406"]}):"\u54c1\u724c\u5382\u5bb6"!=e&&null!=e&&"\u8d85\u7ea7\u7ba1\u7406\u5458"!=e?l.a.createElement(v["a"].Group,{key:"2",disabled:!0,options:K,defaultValue:["\u5907\u6848\u7ba1\u7406"]}):"\u6839\u636e\u89d2\u8272\u9009\u62e9\u81ea\u52a8\u5339\u914d"},A=function(e,t){z(t)};return l.a.createElement("div",null,l.a.createElement(y["a"],{title:"add"===o?"\u65b0\u589e\u7ba1\u7406\u5458":"\u7f16\u8f91",visible:r,onOk:q,onCancel:J},l.a.createElement(d["a"],{labelCol:{span:4},form:N,initialValues:Object(s["a"])(Object(s["a"])({},f),{},{type:f?f.roleArea:"123",agentOutletsId:f&&f.agentOutletsId})},l.a.createElement(d["a"].Item,{rules:[{required:!0,message:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],label:"\u59d3\u540d",name:"name"},l.a.createElement(u["a"],{placeholder:"\u59d3\u540d"})),l.a.createElement(d["a"].Item,{rules:[{required:!0,len:11,message:"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a"}],label:"\u624b\u673a\u53f7",name:"phoneNumber"},l.a.createElement(u["a"],{placeholder:"\u624b\u673a\u53f7",maxLength:11})),l.a.createElement(d["a"].Item,{rules:[{required:!0,message:"\u89d2\u8272\u4e0d\u80fd\u4e3a\u7a7a"}],label:"\u9009\u62e9\u89d2\u8272",className:"mt-8",name:"type"},l.a.createElement(m["a"],{getPopupContainer:function(e){return e.parentNode},placeholder:"\u9009\u62e9\u89d2\u8272",onChange:G},t.rolesList&&t.rolesList.map((function(e){return l.a.createElement(E,{key:e.message,value:e.code+","+e.type},e.message)})))),"\u54c1\u724c\u5382\u5bb6"==C&&l.a.createElement(d["a"].Item,{rules:[{required:!0,message:"\u7ecf\u9500\u5546\u4e0d\u80fd\u4e3a\u7a7a"}],label:"\u7ecf\u9500\u5546",name:"agentOutletsId"},l.a.createElement(m["a"],{getPopupContainer:function(e){return e.parentNode},placeholder:"\u7ecf\u9500\u5546",onChange:A},t.agentList&&t.agentList.map((function(e,t){return l.a.createElement(E,{brandid:e.brandId,brandname:e.brandName,key:t,value:e.agentOutletId},e.brandName)})))),l.a.createElement(d["a"].Item,{label:"\u529f\u80fd\u6743\u9650"},R(C),l.a.createElement("div",null)))))}var x=Object(b["a"])((function(e){var t=e.authorityList;return{authorityList:t}}))(N),w=a("LxC5"),C=function(e){var t=e.authorityList,a=e.dispatch,r=e.getList,u=e.tableLoading,m=(e.login,y["a"].confirm),d=Object(n["useState"])(t.pageSize),b=Object(p["a"])(d,2),f=b[0],g=b[1],v=Object(n["useState"])(t.pageIndex),O=Object(p["a"])(v,2),L=O[0],j=O[1],k=[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u624b\u673a\u53f7",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"\u89d2\u8272",dataIndex:"role",key:"role",render:function(e,t){return"\u652f\u961f\u7ba1\u7406\u5458"===e?l.a.createElement("div",null,e,l.a.createElement("div",null," (",t.roleArea,")")):l.a.createElement("div",null,e," ",t.brandName&&l.a.createElement("span",null," (",t.brandName+"\u54c1\u724c\u5382\u5bb6",")")," ")}},{title:"\u529f\u80fd\u6743\u9650",dataIndex:"power",key:"power"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return l.a.createElement("div",null,1==e?l.a.createElement("a",{className:"font-red"},"\u505c\u7528"):l.a.createElement("a",{className:"font-success"},"\u6b63\u5e38"))}},{title:"\u505c\u7528/\u542f\u7528\u65e5\u671f",dataIndex:"updateTime",key:"updateTime"},{title:"\u64cd\u4f5c",key:"action",render:function(e){return e.phoneNumber==w["c"]?l.a.createElement("div",null,l.a.createElement("a",{onClick:function(){Y("edit",e)},className:"mr-8"},"\u7f16\u8f91")):l.a.createElement("div",null,l.a.createElement("a",{onClick:function(){Y("edit",e)},className:"mr-8"},"\u7f16\u8f91"),1==e.status?l.a.createElement("a",{onClick:function(){N(e)}},"\u542f\u7528"):l.a.createElement("a",{onClick:function(){I(e)},className:"font-red"},"\u505c\u7528"))}}],I=function(e){var t=e.id;m({title:"\u505c\u7528",content:"\u505c\u7528\u4f1a\u5bfc\u81f4\u8be5\u7ba1\u7406\u5458\u4e0d\u80fd\u5728\u767b\u5f55\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\u8fdb\u884c\u4efb\u4f55\u7ba1\u7406\u64cd\u4f5c\uff0c\u786e\u8ba4\u8981\u505c\u7528\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a({type:"authorityList/modifyStatus",payload:{status:1,id:t}})},onCancel:function(){}})},N=function(e){var t=e.id;m({title:"\u542f\u7528",content:"\u542f\u7528\u540e\u8be5\u7ba1\u7406\u5458\u5c06\u6062\u590d\u8d26\u53f7\u89d2\u8272\u5bf9\u5e94\u7ba1\u7406\u6743\u9650\uff0c\u786e\u8ba4\u8981\u542f\u7528\u5417\uff1f",cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onOk:function(){a({type:"authorityList/modifyStatus",payload:{status:0,id:t}})},onCancel:function(){}})},C=function(e){j(e),r(Object(s["a"])(Object(s["a"])({},t.filterValue),{},{pageIndex:e,pageSize:f}))},S={total:t.total,pageIndex:L,pageSize:f,onChange:C,showTotal:function(e){return"\u5171".concat(e,"\u6761")},showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:function(e,t){g(t)}},V=Object(n["useState"])(!1),T=Object(p["a"])(V,2),F=T[0],z=T[1],q=Object(n["useState"])("add"),J=Object(p["a"])(q,2),G=J[0],K=J[1],R=Object(n["useState"])(null),A=Object(p["a"])(R,2),B=A[0],M=A[1],P=function(){z(!1)},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;M(t),K(e),z(!0)};return l.a.createElement("div",{className:"mt-32"},l.a.createElement(i["a"],{justify:"end"},l.a.createElement(o["a"],null,l.a.createElement(c["a"],{onClick:function(){Y("add")},className:"btn-green",icon:l.a.createElement(h["a"],null),type:"primary"},"\u65b0\u589e"))),l.a.createElement("div",{className:"mt-16"},l.a.createElement(E["a"],{loading:u,rowKey:"id",dataSource:t.data?t.data.content:[],columns:k,pagination:S})),l.a.createElement(x,{key:B?B.id+(new Date).getTime():1,type:G,isVisible:F,visibleFn:P,rows:B,getList:r}))},S=Object(b["a"])((function(e){var t=e.authorityList,a=e.loading,n=e.login;return{authorityList:t,login:n,tableLoading:a.effects["authorityList/getList"]}}))(C),V=a("LGu7"),T=a.n(V),F=function(e){var t=e.authorityList,a=e.dispatch,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.pageIndex,l=t.pageSize;a({type:"authorityList/getList",payload:{pageIndex:n,pageSize:l,filterValue:e}})},c=function(){a({type:"authorityList/getRoles"})};return Object(n["useEffect"])((function(){i(),c()}),[]),l.a.createElement(r["b"],{className:T.a.main},l.a.createElement("div",null,l.a.createElement(g,{getList:i}),l.a.createElement(S,{getList:i})))};t["default"]=Object(b["a"])((function(e){var t=e.authorityList;return{authorityList:t}}))(F)}}]);